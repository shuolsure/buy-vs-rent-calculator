<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>北京买房 vs 租房财务决策计算器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .result-panel-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            border: 2px dashed #e5e7eb;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">买房 vs 租房 财务决策计算器</h1>
            <p class="text-gray-600 mt-2">量化分析，助您做出更明智的财务选择</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Input Panel -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-6 border-b pb-4">输入参数</h2>
                <form id="calculator-form" class="space-y-4">
                    
                    <div>
                        <label for="totalPrice" class="block text-sm font-medium text-gray-700">房产总价 (万元)</label>
                        <input type="number" id="totalPrice" value="500" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div>
                        <label for="downPayment" class="block text-sm font-medium text-gray-700">首付金额 (万元)</label>
                        <input type="number" id="downPayment" value="150" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    
                    <div>
                        <label for="loanRate" class="block text-sm font-medium text-gray-700">贷款利率 (%)</label>
                        <input type="number" id="loanRate" value="3.0" step="0.01" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div>
                        <label for="investmentReturnRate" class="block text-sm font-medium text-gray-700">预期理财收益率 (%)</label>
                        <input type="number" id="investmentReturnRate" value="2.5" step="0.01" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div>
                        <label for="renovationCost" class="block text-sm font-medium text-gray-700">装修投入 (万元)</label>
                        <input type="number" id="renovationCost" value="20" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div>
                        <label for="transactionFees" class="block text-sm font-medium text-gray-700">交易税费 (万元)</label>
                        <input type="number" id="transactionFees" value="10" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div>
                        <label for="monthlyRent" class="block text-sm font-medium text-gray-700">同地段月租金 (元)</label>
                        <input type="number" id="monthlyRent" value="7000" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div>
                        <label for="holdingYears" class="block text-sm font-medium text-gray-700">预计持有年限 (年)</label>
                        <input type="number" id="holdingYears" value="10" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div>
                        <label for="appreciationRate" class="block text-sm font-medium text-gray-700">房价年化涨跌幅预期 (%)</label>
                        <input type="number" id="appreciationRate" value="1.0" step="0.1" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>

                    <div class="pt-4">
                        <button type="button" onclick="calculate()" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            计 算
                        </button>
                    </div>
                </form>
            </div>

            <!-- Result Panel -->
            <div id="result-panel" class="bg-white p-6 rounded-lg shadow-md">
                 <div id="result-placeholder" class="result-panel-placeholder">
                    <div class="text-center text-gray-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M12 8h.01M15 8h.01M15 14h.01M18 17h.01M12 17h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p class="mt-2 text-lg">结果将在此处显示</p>
                    </div>
                </div>
                <div id="result-content" class="hidden">
                    <!-- Recommendation will be injected here -->
                </div>
            </div>
        </div>

        <footer class="text-center mt-10 text-gray-500 text-sm">
            <p>&copy; 2024 AI 辅助开发。本计算器仅为财务模型，不构成任何投资建议。</p>
        </footer>
    </div>

    <script>
        function formatMoney(value) {
            return new Intl.NumberFormat('zh-CN', { style: 'currency', currency: 'CNY' }).format(value);
        }

        function calculate() {
            // Get values from form and convert units
            const totalPrice = parseFloat(document.getElementById('totalPrice').value) * 10000;
            const downPayment = parseFloat(document.getElementById('downPayment').value) * 10000;
            const loanRate = parseFloat(document.getElementById('loanRate').value) / 100;
            const investmentReturnRate = parseFloat(document.getElementById('investmentReturnRate').value) / 100;
            const renovationCost = parseFloat(document.getElementById('renovationCost').value) * 10000;
            const transactionFees = parseFloat(document.getElementById('transactionFees').value) * 10000;
            const monthlyRent = parseFloat(document.getElementById('monthlyRent').value);
            const holdingYears = parseInt(document.getElementById('holdingYears').value);
            const appreciationRate = parseFloat(document.getElementById('appreciationRate').value) / 100;

            // --- Calculations ---
            const loanAmount = totalPrice - downPayment;
            
            // Simplified annual interest calculation. For a real mortgage, this would be an amortization schedule.
            const loanInterestAnnual = loanAmount * loanRate;
            
            const opportunityCost = (downPayment + renovationCost + transactionFees) * investmentReturnRate;
            const propertyMaintenanceFee = totalPrice * 0.003;
            const expensesAmortization = (renovationCost + transactionFees) / holdingYears;
            const propertyValueChange = totalPrice * appreciationRate;

            const buyAnnualCost = loanInterestAnnual + opportunityCost + propertyMaintenanceFee + expensesAmortization - propertyValueChange;
            const rentAnnualCost = monthlyRent * 12;

            // --- Display Results ---
            const resultPlaceholder = document.getElementById('result-placeholder');
            const resultContent = document.getElementById('result-content');
            resultPlaceholder.classList.add('hidden');
            resultContent.classList.remove('hidden');

            const recommendation = buyAnnualCost < rentAnnualCost ? {
                text: '建议购房',
                bgColor: 'bg-green-100',
                textColor: 'text-green-800'
            } : {
                text: '建议租房',
                bgColor: 'bg-orange-100',
                textColor: 'text-orange-800'
            };

            resultContent.innerHTML = `
                <div class="${recommendation.bgColor} ${recommendation.textColor} p-4 rounded-lg mb-6 text-center">
                    <h2 class="text-2xl font-bold">${recommendation.text}</h2>
                </div>

                <div class="grid grid-cols-2 gap-4 text-center mb-6">
                    <div>
                        <p class="text-sm text-gray-500">买房年化净成本</p>
                        <p class="text-2xl font-bold text-red-600">${formatMoney(buyAnnualCost)}</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">租房年化净成本</p>
                        <p class="text-2xl font-bold text-green-600">${formatMoney(rentAnnualCost)}</p>
                    </div>
                </div>

                <h3 class="text-xl font-bold mb-4 border-b pb-2">成本明细</h3>
                
                <div class="space-y-3">
                    <h4 class="font-semibold text-lg">买房成本构成 (年化)</h4>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>
                            <span>贷款利息支出:</span>
                            <span class="font-medium float-right">${formatMoney(loanInterestAnnual)}</span>
                        </li>
                        <li>
                            <span>机会成本 (首付及投入资金的理财收益):</span>
                            <span class="font-medium float-right">${formatMoney(opportunityCost)}</span>
                        </li>
                        <li>
                            <span>物业取暖等持有费用 (估算):</span>
                            <span class="font-medium float-right">${formatMoney(propertyMaintenanceFee)}</span>
                        </li>
                        <li>
                            <span>装修及税费摊销:</span>
                            <span class="font-medium float-right">${formatMoney(expensesAmortization)}</span>
                        </li>
                        <li class="border-t pt-2">
                            <span>房价增值收益 (抵扣成本):</span>
                            <span class="font-medium float-right text-green-600">-${formatMoney(propertyValueChange)}</span>
                        </li>
                    </ul>

                    <h4 class="font-semibold text-lg pt-4">租房成本构成 (年化)</h4>
                     <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>
                            <span>租金总支出:</span>
                            <span class="font-medium float-right">${formatMoney(rentAnnualCost)}</span>
                        </li>
                    </ul>
                </div>
            `;
        }
    </script>
</body>
</html>
